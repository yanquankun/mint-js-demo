<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>mint-js-demo</title>
    <style>
      [id^="progress"] {
        margin: 70px;
      }
    </style>
  </head>

  <body>
    <div id="progress1"></div>
  </body>
  <script>
    window.log = log = function () {
      let out = "",
        fun_name = arguments.callee.caller
          ? arguments.callee.caller.name || "输出"
          : typeof window !== undefined
          ? "WINDOW"
          : "NODE";
      for (const arg of arguments) {
        out += arg + " ";
      }
      return [
        `%c${fun_name}:%c${out}`,
        "background: #00cc00; color: #fff; border-radius: 3px 0 0 3px;padding:2px 5px",
        "background: #1475B2; color: #fff; border-radius: 0 3px 3px 0;padding:2px 5px",
      ];
    };
  </script>
  <!-- <script src="./myfilter.js"></script> -->
  <!-- <script src="./once.js"></script> -->
  <!-- <script src="./myInterval.js"></script> -->
  <!-- <script src="./progress-bar.js"></script> -->
  <!-- <script src="./myPromise.js"></script> -->
  <!-- <script src="./bigNumAdd.js"></script> -->
  <!-- <script src="./vue.test.js"></script> -->
  <!-- <script src="./simplePromise.js"></script> -->
  <!-- <script src="./chainPromise.js"></script> -->
  <!-- <script src="./subscribe.js"></script> -->
  <script>
    if (window.progress) {
      var progress_ins = progress.init({
        domId: "progress1",
      });
      progress.forward(progress_ins.domId, 30);

      var progress_ins2 = progress.init({});
      progress.forward(progress_ins2.domId, 66.6);
      setInterval(() => {
        progress.delPDom(progress_ins2.domId);
      }, 10000);
    }
  </script>
  <script>
    // 发布订阅模式测试
    if (window.PubSub) {
      var subId1 = PubSub.subscribe("test", function (res, topicName) {
        console.log("subId1:", res, topicName);
      });
      var subId2 = PubSub.subscribe("test", function (res, topicName) {
        console.log("subId2:", res, topicName);
      });
      PubSub.publish("test", "我是发布订阅模式");
      PubSub.unSubscribe(subId1);
      PubSub.publish("test", "我是发布订阅模式1");
      PubSub.unSubscribe(subId2);
      PubSub.publish("test", "我是发布订阅模式2");
      var subId3 = PubSub.subscribe("test", function (res, topicName) {
        console.log("subId3:", res, topicName);
      });
      PubSub.publish("test", "我是发布订阅模式3");
      var subId4 = PubSub.subscribe("test1", function (res) {
        console.log("subId4:", res);
      });
      PubSub.publish("test1", "我是发布订阅模式4");
      var sync = function (res, topicName) {
        setTimeout(() => {
          console.log("subId5:", res, topicName);
        }, 500);
      };
      var subId5 = PubSub.subscribe("test2", sync);
      PubSub.publish("test2", "我是异步发布订阅模式5");
      PubSub.publishSync("test2", "我是异步1s发布订阅模式6", 1000);
      PubSub.publishSync("test2", "我是异步2s发布订阅模式7", 2000);
      ƒ;
    }
  </script>
</html>
